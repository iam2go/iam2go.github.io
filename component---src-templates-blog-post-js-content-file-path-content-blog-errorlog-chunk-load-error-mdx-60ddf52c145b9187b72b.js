"use strict";(self.webpackChunkleego_dev_log=self.webpackChunkleego_dev_log||[]).push([[358],{5007:function(e,t,n){n.r(t),n.d(t,{Head:function(){return v},default:function(){return x}});var a=n(1151),r=n(7294);function l(e){const t=Object.assign({h2:"h2",a:"a",span:"span",p:"p",code:"code",pre:"pre"},(0,a.ah)(),e.components);return r.createElement(r.Fragment,null,r.createElement("img",{src:"https://blog.kakaocdn.net/dn/QVBZA/btsKyesaiap/J1gpij3knSAts2W7CCKkt0/img.png",className:"m-auto"}),"\n",r.createElement(t.h2,{id:"문제파악",style:{position:"relative"}},r.createElement(t.a,{href:"#%EB%AC%B8%EC%A0%9C%ED%8C%8C%EC%95%85","aria-label":"문제파악 permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"문제파악"),"\n",r.createElement(t.p,null,"어느 날부터 간헐적으로 ChunkLoadError가 발생했다."),"\n",r.createElement(t.p,null,"보통 이러한 이슈는 배포 후 chunk 파일의 해쉬가 새롭게 바뀌면서 이전 파일을 보고있던 사용자가 페이지를 이동할 때 이전 chunk파일을 찾기 때문에 발생하는 이슈이다. 하지만 나의 경우 배포여부와 상관없이 chunk를 로드하지 못했다는 에러를 뿜어냈다."),"\n",r.createElement(t.p,null,"source탭에서 가져온 파일을 살펴보니 ",r.createElement(t.code,null,"812.b596d57c.chunk.js")," 파일은 최신배포 버전에 속한 파일이 맞으며, 실제 존재한다."),"\n",r.createElement(t.p,null,"다만 해당 이슈가 발생했을때는 원인은 모르겠지만 해당 chunk파일을 비롯한 몇몇 chunk파일을 가져오지 않고있었다."),"\n",r.createElement(t.p,null,"동일한 프로젝트를 배포한 다른 환경에서는 해당 현상이 발생하지 않는 것을 확인했다. 이를 통해 코드나 서버 설정보다는 내가 컨트롤할 수 없는 네트워크나 특정 환경적인 문제일 것이라 판단했다."),"\n",r.createElement("br"),"\n",r.createElement("br"),"\n",r.createElement(t.h2,{id:"해결",style:{position:"relative"}},r.createElement(t.a,{href:"#%ED%95%B4%EA%B2%B0","aria-label":"해결 permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"해결?"),"\n",r.createElement(t.p,null,"하지만 그렇다고 이슈를 방치할 수는 없었기 때문에, 코드스플리팅 부분에 방어 코드를 추가했다. chunk파일을 로드하지 못하는 상황이 발생할 경우, 이를 재시도하도록 설정하여 에러 상황에서도 chunk 파일을 정상적으로 로드할 수 있도록 개선했다."),"\n",r.createElement(t.pre,null,r.createElement(t.code,null,"\nconst retry = (\n  callback: () => LazyImport,\n  retries = 5,\n  interval = 1000\n): LazyImportResult => {\n  return new Promise((resolve, reject) => {\n    callback()\n      .then(resolve)\n      .catch((error) => {\n        if (retries <= 1) {\n          reject(error);\n          return;\n        }\n        setTimeout(() => {\n          retry(callback, retries - 1, interval).then(resolve, reject);\n        }, interval);\n      });\n  });\n};\n\nconst lazyRetry = (importFunc: () => LazyImport) =>\n  lazy(() => retry(importFunc));\n\n")),"\n",r.createElement(t.pre,null,r.createElement(t.code,null,"\nconst Main = withSuspense(lazyRetry(() => import('@/components/pages/Main')));\n")),"\n",r.createElement(t.p,null,"이런 식으로 사용해주면 된다."))}var c=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?r.createElement(t,e,r.createElement(l,e)):l(e)},m=n(1883),s=n(157),o=n(588),i=n(8709),p=n(9357),u=n(7174),d=n(4462),h=n(8336),E=n(1075);const f={img:e=>{let{src:t,alt:n}=e;return r.createElement("img",{src:t,alt:n,className:"m-auto md:w-3/4"})},pre:d.d,code:e=>r.createElement("code",Object.assign({},e,{className:"bg-background-primary text-accent-default bg-opacity-70"}))},g=e=>{var t;let{data:{previous:n,next:l,site:c,mdx:p},location:d,children:g}=e;const v=(null===(t=c.siteMetadata)||void 0===t?void 0:t.title)||"Title";return r.createElement(i.Z,{location:d,title:v},r.createElement("article",{className:"blog-post px-8 pt-10",itemScope:!0,itemType:"http://schema.org/Article"},r.createElement("header",{className:"text-center py-14"},r.createElement("h1",{itemProp:"headline"},p.frontmatter.title),r.createElement("p",{className:"text-accent-default text-xs mt-8"},p.frontmatter.date)),r.createElement("section",{className:"h-fit my-28 text-text-default",itemProp:"articleBody"},r.createElement(a.Zo,{components:f},g)),r.createElement(u.a,null,p.frontmatter.tags.map((e=>r.createElement(u.V,{key:e,text:e})))),r.createElement("hr",{className:"my-10"}),r.createElement(h.Z),r.createElement("footer")),r.createElement("nav",{className:"blog-post-nav px-8 mt-8"},r.createElement("ul",{className:"flex flex-wrap justify-between list-none p-0 text-text-default"},n?r.createElement(m.Link,{to:n.fields.slug,rel:"prev"},r.createElement("li",{className:"bg-background-primary/50 text-sm p-3 rounded-xl h-fit flex items-center gap-3"},r.createElement(o.D,{size:22,className:"text-accent-default"}),r.createElement("p",{className:"max-w-[28rem]"},n.frontmatter.title))):r.createElement("div"),l&&r.createElement(m.Link,{to:l.fields.slug,rel:"next"},r.createElement("li",{className:"bg-background-primary/50 text-sm p-3 rounded-xl h-fit flex items-center gap-3"},r.createElement("p",{className:"max-w-[28rem]"},l.frontmatter.title),r.createElement(s.M,{size:22,className:"text-accent-default"}))))),r.createElement(E.Z,{contents:p.tableOfContents}))},v=e=>{let{data:{mdx:t}}=e;return r.createElement(p.Z,{title:t.frontmatter.title,description:t.frontmatter.description||t.excerpt})};function x(e){return r.createElement(g,e,r.createElement(c,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-blog-errorlog-chunk-load-error-mdx-60ddf52c145b9187b72b.js.map