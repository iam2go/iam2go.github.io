"use strict";(self.webpackChunkleego_dev_log=self.webpackChunkleego_dev_log||[]).push([[875],{792:function(e,t,n){n.r(t),n.d(t,{Head:function(){return S},default:function(){return x}});var o=n(1151),l=n(7294);function a(e){const t=Object.assign({p:"p",a:"a",strong:"strong",h1:"h1",span:"span",pre:"pre",code:"code"},(0,o.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"이 글은 ",l.createElement(t.a,{href:"https://iam2go.github.io/REACT/create-modal-using-portal/"},l.createElement(t.strong,null,"Portal을 사용한 모달창 만들기")),"에서 이어집니다."),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.p,null,"모달을 필요한 컴포넌트에서 그때그때 렌더링 하는 방법은 불필요한 코드를 늘리며, 각각의 컴포넌트에서 모달에 관련된 로직까지 담당하게 되어 컴포넌트의 단일 책임 원칙을 위반한다.\n모달의 상태를 전역으로 관리하여 필요한 곳에서 호출만 해주면 되도록 변경한다면 위에서 언급한 문제점들을 해결할 수 있다."),"\n",l.createElement(t.p,null,"먼저 context API를 사용한 방법, 그리고 Redux를 사용한 방법에 대해서 차례대로 알아보자."),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.h1,{id:"1️-context-api를-사용한-모달-관리",style:{position:"relative"}},l.createElement(t.a,{href:"#1%EF%B8%8F-context-api%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8B%AC-%EA%B4%80%EB%A6%AC","aria-label":"1️ context api를 사용한 모달 관리 permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"1️⃣ context API를 사용한 모달 관리"),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// context/ModalProvider.js\n\nimport React, { useState } from "react";\n\nexport const ModalStateContext = React.createContext();\nexport const ModalSetterContext = React.createContext();\n\nfunction ModalProvider({ children }) {\n  const [state, setState] = useState({\n            type: null,\n            props: null,\n    });\n\n  return (\n    <ModalSetterContext.Provider value={setState}>\n      <ModalStateContext.Provider value={state}>\n        {children}\n      </ModalStateContext.Provider>\n    </ModalSetterhContext.Provider>\n  );\n}\n\nexport default ModalProvider;\n')),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"createContext()"),"를 통해 모달 context를 생성해준다."),"\n",l.createElement(t.p,null,"context를 구독하는 모든 컴포넌트는 Provider의 value prop가 바뀔 때마다 다시 렌더링 되기 때문에, setter함수만 이용하는 컴포넌트도 state값이 바뀌면 리렌더링 된다. 따라서 state와 setter함수 각각의 context를 분리하여 불필요한 리렌더링을 방지하였다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// index.js\n\nimport React from "react";\nimport ReactDOM from "react-dom/client";\nimport App from "./App";\nimport ModalProvider from "./context/ModalProvider";\nimport GlobalStyle from "./style/GlobalStyle";\nconst root = ReactDOM.createRoot(document.getElementById("root"));\nroot.render(\n  <>\n    <ModalProvider>\n      <GlobalStyle />\n      <App />\n    </ModalProvider>\n  </>\n);\n')),"\n",l.createElement(t.p,null,"만든 ",l.createElement(t.code,null,"ModalProvider"),"로 App을 감싸준다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// hooks/useModal.js\n\nimport { useContext } from "react";\nimport { ModalSetterContext } from "../context/ModalProvider";\n\nfunction useModal() {\n  const setModalState = useContext(ModalSetterSContext);\n\n  const openModal = ({ type, props = null }) => {\n    setModalState({type, props});\n  };\n\n  const closeModal = () => {\n    setModalState({type: null, props: null});\n  };\n\n  return { openModal, closeModal };\n}\n\nexport default useModal;\n')),"\n",l.createElement("br"),"\n",l.createElement(t.p,null,"이제 context를 통해 제공받은 setter함수를 사용하여 모달을 열고 닫는 로직을 구현해야한다."),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"useModal"),"이라는 이름의 커스텀 hook을 만들어주었다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'function App() {\n  const { openModal } = useModal();\n\n  const onClickButton1 = () => {\n    openModal({ type: "first" });\n  };\n\n  const onClickButton2 = () => {\n    openModal({ type: "second" });\n  };\n\n  return (\n    <AppWrap>\n      <Button onClick={onClickButton1}>Click Me !</Button>\n      <Button className="blue" onClick={onClickButton2}>\n        Click Me !\n      </Button>\n        </AppWrap>\n    );\n}\n')),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"useModal"),"에서 구현한 ",l.createElement(t.code,null,"openModal"),"을 사용하여 모달을 띄우면 된다."),"\n",l.createElement("br"),"\n",l.createElement(t.p,null,"마지막으로 모달 컴포넌트 렌더링을 담당하는 모달 관리 컴포넌트를 만들어야 한다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// components/ModalContainer.js\n\nimport React, { useContext } from "react";\nimport { createPortal } from "react-dom";\nimport { ModalStateContext } from "../../context/ModalProvider";\nimport SampleModal from "./SampleModal";\nimport SecondModal from "./SecondModal";\n\nconst MODAL_COMPONENTS = {\n  first: SampleModal,\n  second: SecondModal,\n};\n\nfunction ModalContainer() {\n  const { type, props } = useContext(ModalStateContext);\n    const { }\n\n  if (!type) {\n    return null;\n  }\n\n  const Modal = MODAL_COMPONENTS[type];\n  return createPortal(\n    <>\n      <Modal {...props} />\n    </>,\n    document.getElementById("modal")\n  );\n}\n\nexport default ModalContainer;\n')),"\n",l.createElement(t.p,null,"프로젝트에서 사용하는 모든 모달 컴포넌트를 불러온 뒤 ",l.createElement(t.code,null,"MODAL_COMPONENTS"),"객체에 차곡차곡 담아준다."),"\n",l.createElement(t.p,null,"context로부터 전달받은 type에 해당하는 모달 컴포넌트를 렌더링 하고, props값을 넘겨준다."),"\n",l.createElement("br"),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// components/ModalContainer\n...\nimport useModal from "../../hooks/useModal";\n\n...\nfunction ModalContainer() {\n  const { closeModal } = useModal();\n\n  const renderModal = modalList.map(({ type, props }) => {\n    const ModalComponent = MODAL_COMPONENTS[type];\n    return <ModalComponent key={type} {...props} onClose={closeModal} />;\n  });\n  return createPortal(<>{renderModal}</>, document.getElementById("modal"));\n}\n\nexport default ModalContainer;\n')),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"closeModal"),"메서드는 위 코드처럼 ",l.createElement(t.code,null,"ModalContainer"),"에서 불러와 모달 컴포넌트의 props로 넘겨주어도 되고, 각각의 모달 컴포넌트에서 불러와 사용해도 된다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// index.js\n\n...\n\nimport ModalContainer from "./components/Modal/ModalContainer";\n\nconst root = ReactDOM.createRoot(document.getElementById("root"));\nroot.render(\n  <>\n    <ModalProvider>\n      <GlobalStyle />\n      <App />\n      <ModalContainer />\n    </ModalProvider>\n  </>\n);\n')),"\n",l.createElement(t.p,null,"이 모달 관리 컴포넌트는 App과 같은 레벨에 추가해주었다."),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.h1,{id:"2️-redux를-사용한-모달-관리",style:{position:"relative"}},l.createElement(t.a,{href:"#2%EF%B8%8F-redux%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8B%AC-%EA%B4%80%EB%A6%AC","aria-label":"2️ redux를 사용한 모달 관리 permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2️⃣ redux를 사용한 모달 관리"),"\n",l.createElement(t.p,null,"정확히는 ",l.createElement(t.strong,null,"redux-toolkit"),"을 사용한 모달 관리에 대하여 설명한다. ",l.createElement(t.code,null,"ModalContainer"),"를 비롯한 전체적인 로직은 context api를 사용한 모달 관리와 비슷하며, 달라진 부분만을 다뤘다."),"\n",l.createElement(t.p,null,"프로젝트에 이미 redux 관련 셋팅이 완료되었다는 가정하에 진행한다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// store/index.js\n\nimport { combineReducers, configureStore } from "@reduxjs/toolkit";\nimport { modalSlice } from "./modalSlice";\n...\n\nconst rootReducer = combineReducers({\n...\n  modal: modalSlice.reducer,\n});\n\nexport const store = configureStore({\n  reducer: rootReducer,\n});\n')),"\n",l.createElement(t.p,null,"먼저 ",l.createElement(t.code,null,"rootReducer")," 에 모달 reducer를 추가해준다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// store/modalSlice.js\n\nimport { createSlice } from "@reduxjs/toolkit";\n\nconst initialState = {\n  type: null,\n  props: null,\n};\n\nexport const modalSelector = (state) => state.modal;\n\nexport const modalSlice = createSlice({\n  name: "modal",\n  initialState,\n  reducers: {\n    openModal: (state, action) => {\n      const { type, props } = action.payload;\n      state.type = type;\n      state.props = props;\n    },\n    closeModal: (state, action) => {\n      return initialState;\n    },\n  },\n});\n\nexport const { openModal, closeModal } = modalSlice.actions;\n')),"\n",l.createElement(t.p,null,"modalSlice를 생성한 뒤,  ",l.createElement(t.code,null,"openModal")," , ",l.createElement(t.code,null,"closeModal")," 리듀서 함수를 만들어준다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// hooks/useModal.js\n\nimport { useDispatch } from "react-redux";\nimport { openModal, closeModal } from "../store/modalSlice";\n\nfunction useModal() {\n  const dispatch = useDispatch();\n\n  const handleOpenModal = ({ type, props }) => {\n    dispatch(openModal({ type, props }));\n  };\n\n  const handleCloseModal = (type) => {\n    dispatch(closeModal());\n  };\n\n  return { openModal: handleOpenModal, closeModal: handleCloseModal };\n}\n\nexport default useModal;\n')),"\n",l.createElement(t.p,null,"useModal에서는 context api 사용 시 setter함수를 사용하여 state를 변경했던 부분을 ",l.createElement(t.code,null,"dispatch"),"를 사용한 코드로 바꿔주면 된다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// components/ModalContainer.js\n\nimport React from "react";\nimport { createPortal } from "react-dom";\nimport { useSelector } from "react-redux";\nimport { modalSelector } from "../../store/modalSlice";\nimport SampleModal from "./SampleModal";\nimport SecondModal from "./SecondModal";\n\nconst MODAL_COMPONENTS = {\n  first: SampleModal,\n  second: SecondModal,\n};\n\nfunction ModalContainer() {\n  const { type, props } = useSelector(modalSelector);\n\n  if (!type) {\n    return null;\n  }\n\n  const Modal = MODAL_COMPONENTS[type];\n  return createPortal(\n    <>\n      <Modal {...props} />\n    </>,\n    document.getElementById("modal")\n  );\n}\n\nexport default ModalContainer;\n')),"\n",l.createElement(t.p,null,"모달의 type과 props는 ",l.createElement(t.code,null,"useSelector"),"를 사용하여 가져온다. 이하 코드는 동일하다."),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.h1,{id:"여러-개의-모달-띄우기",style:{position:"relative"}},l.createElement(t.a,{href:"#%EC%97%AC%EB%9F%AC-%EA%B0%9C%EC%9D%98-%EB%AA%A8%EB%8B%AC-%EB%9D%84%EC%9A%B0%EA%B8%B0","aria-label":"여러 개의 모달 띄우기 permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"여러 개의 모달 띄우기"),"\n",l.createElement(t.p,null,"프로젝트를 만들다 보면 가끔 모달 안에서 또 다른 모달을 호출할 일이 생긴다.\n하지만 위에서 소개한 방법으로는 두 개 이상의 모달을 띄울 수 없다."),"\n",l.createElement("img",{src:"https://blog.kakaocdn.net/dn/6nk9H/btrLNvHsOak/S1CtIoG1lzuNuoaatinI21/img.gif",width:"612",className:"m-auto"}),"\n",l.createElement("br"),"\n",l.createElement(t.p,null,"모달 상태 값으로 하나의 모달 정보만을 저장하기 때문에, 또 다른 모달 호출 시 기존 모달이 사라지고 새로운 모달이 나타난다."),"\n",l.createElement(t.p,null,"여러 개의 모달을 띄우기 위해서는 모달 상태 값을 배열로 변경하여 렌더링 할 모달 정보를 차곡차곡 쌓아주어야 한다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// store/modalSlice.js\n\nimport { createSlice } from "@reduxjs/toolkit";\n\nconst initialState = [];\n\nexport const modalSelector = (state) => state.modal;\n\nexport const modalSlice = createSlice({\n  name: "modal",\n  initialState,\n  reducers: {\n    openModal: (state, action) => {\n      const { type, props } = action.payload;\n      return state.concat({ type, props });\n    },\n    closeModal: (state, action) => {\n      state.pop();\n    },\n  },\n});\n\nexport const { openModal, closeModal } = modalSlice.actions;\n')),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"openModal")," 액션이 발생하면 모달 리스트에 새로 열린 모달 정보를 넣어주도록 바꿔주었다."),"\n",l.createElement(t.p,null,"반대로 ",l.createElement(t.code,null,"closeModal")," 액션이 발생하면 모달 리스트에서 가장 마지막에 열린 모달 정보를 ",l.createElement(t.code,null,"pop")," 해주었다."),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'// components/ModalContainer.js\n\nimport React from "react";\nimport { createPortal } from "react-dom";\nimport { useSelector } from "react-redux";\nimport { modalSelector } from "../../store/modalSlice";\nimport SampleModal from "./SampleModal";\nimport SecondModal from "./SecondModal";\n\nconst MODAL_COMPONENTS = {\n  first: SampleModal,\n  second: SecondModal,\n};\n\nfunction ModalContainer() {\n  const modalList = useSelector(modalSelector);\n\n  const renderModal = modalList.map(({ type, props }) => {\n    const ModalComponent = MODAL_COMPONENTS[type];\n    return <ModalComponent key={type} {...props} />;\n  });\n  return createPortal(<>{renderModal}</>, document.getElementById("modal"));\n}\n\nexport default ModalContainer;\n')),"\n",l.createElement(t.p,null,l.createElement(t.code,null,"ModalContainer")," 에서 모달 컴포넌트를 렌더링 하는 부분을 바꿔준다."),"\n",l.createElement("img",{src:"https://blog.kakaocdn.net/dn/b1yAbX/btrLMyLfuVH/sjsGWWrNnXP2hK2kvStjyK/img.gif",width:"612",className:"m-auto"}),"\n",l.createElement(t.p,null,"이제 여러 개의 모달을 띄울 수 있다."),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.p,null,"이번 글은 모달을 전역적으로 관리하기 위해 ‘어떻게 구조를 잡아야 하는지’에 초점을 맞췄습니다. 코드 하나하나의 설명은 생략했기 때문에 만약 궁금한 부분이 있다면 댓글을 남겨주세요🙂"),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(t.h1,{id:"참고-",style:{position:"relative"}},l.createElement(t.a,{href:"#%EC%B0%B8%EA%B3%A0-","aria-label":"참고  permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"참고 📌"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://stackoverflow.com/questions/35623656/how-can-i-display-a-modal-dialog-in-redux-that-performs-asynchronous-actions/35641680"},"stackoverflow: how can I display a Modal-dialog in redux that performs asynchronous actions")),"\n",l.createElement(t.p,null," ",l.createElement(t.a,{href:"https://stackoverflow.com/questions/35623656/how-can-i-display-a-modal-dialog-in-redux-that-performs-asynchronous-actions/35641680"},"How can I display a modal dialog in Redux that performs asynchronous actions?")),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://blog.isquaredsoftware.com/2017/07/practical-redux-part-10-managing-modals/#adding-modal-dialogs"},"Practical Redux, Part 10: Managing Modals")))}var r=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,o.ah)(),e.components);return t?l.createElement(t,e,l.createElement(a,e)):a(e)},c=n(1883),d=n(157),m=n(588),s=n(8709),p=n(9357),i=n(7174),u=n(4462),E=n(8336),M=n(1075);const f={img:e=>{let{src:t,alt:n}=e;return l.createElement("img",{src:t,alt:n,className:"m-auto md:w-3/4"})},pre:u.d,code:e=>l.createElement("code",Object.assign({},e,{className:"bg-background-primary text-accent-default bg-opacity-70"}))},h=e=>{var t;let{data:{previous:n,next:a,site:r,mdx:p},location:u,children:h}=e;const S=(null===(t=r.siteMetadata)||void 0===t?void 0:t.title)||"Title";return l.createElement(s.Z,{location:u,title:S},l.createElement("article",{className:"blog-post px-8 pt-10",itemScope:!0,itemType:"http://schema.org/Article"},l.createElement("header",{className:"text-center py-14"},l.createElement("h1",{itemProp:"headline"},p.frontmatter.title),l.createElement("p",{className:"text-accent-default text-xs mt-8"},p.frontmatter.date)),l.createElement("section",{className:"h-fit my-28 text-text-default",itemProp:"articleBody"},l.createElement(o.Zo,{components:f},h)),l.createElement(i.a,null,p.frontmatter.tags.map((e=>l.createElement(i.V,{key:e,text:e})))),l.createElement("hr",{className:"my-10"}),l.createElement(E.Z),l.createElement("footer")),l.createElement("nav",{className:"blog-post-nav px-8 mt-8"},l.createElement("ul",{className:"flex flex-wrap justify-between list-none p-0 text-text-default"},n?l.createElement(c.Link,{to:n.fields.slug,rel:"prev"},l.createElement("li",{className:"bg-background-primary/50 text-sm p-3 rounded-xl h-fit flex items-center gap-3"},l.createElement(m.D,{size:22,className:"text-accent-default"}),l.createElement("p",{className:"max-w-[28rem]"},n.frontmatter.title))):l.createElement("div"),a&&l.createElement(c.Link,{to:a.fields.slug,rel:"next"},l.createElement("li",{className:"bg-background-primary/50 text-sm p-3 rounded-xl h-fit flex items-center gap-3"},l.createElement("p",{className:"max-w-[28rem]"},a.frontmatter.title),l.createElement(d.M,{size:22,className:"text-accent-default"}))))),l.createElement(M.Z,{contents:p.tableOfContents}))},S=e=>{let{data:{mdx:t}}=e;return l.createElement(p.Z,{title:t.frontmatter.title,description:t.frontmatter.description||t.excerpt})};function x(e){return l.createElement(h,e,l.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-blog-react-efficient-modal-management-mdx-952c5a1f601b5632f28e.js.map